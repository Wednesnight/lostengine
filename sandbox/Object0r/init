require("Application")
require("spectator")

function lost.application.Application:configure(event)
  self.config.displayAttributes = lost.common.DisplayAttributes()
  self.config.displayAttributes.width = 800;
  self.config.displayAttributes.height = 600;
  self.config.displayAttributes.redbits = 8;
  self.config.displayAttributes.bluebits = 8;
  self.config.displayAttributes.greenbits = 8;
  self.config.displayAttributes.alphabits = 8;
  self.config.displayAttributes.depthbits = 24;
  self.config.displayAttributes.stencilbits = 0;
  self.config.displayAttributes.fullscreen = false;
  self.config.displayAttributes.title = "Object0r";
end

function lost.application.Application:init(event)
  -- Initialize camera
  self.config.cameraController = lost.camera.CameraController()
  self.config.camera = self.config.cameraController.camera

  -- Initialize model attributes
  self.config.modelFilename = "professor_tri.obj"
  self.config.modelSize     = 5.0

  -- Initialize model parser, mesh, material
  self.config.modelMesh     = lost.model.Mesh()
  self.config.modelMaterial = lost.model.obj.Material()

  local modelParser = lost.model.obj.Parser(globals.app.loader);
  modelParser:parseMesh(self.config.modelFilename, self.config.modelMesh, self.config.modelMaterial);

  -- Initialize model renderer
  self.config.modelRenderer      = lost.model.obj.Renderer(self.config.modelMesh, self.config.modelMaterial);
  self.config.modelRenderer.size = self.config.modelSize;

  self.config.lightShininess = 128
  self.config.lightCutoff    = 180
  self.config.lightAmbient   = lost.math.Vec4(0.1, 0.1, 0.1, 1.0)
  self.config.lightDiffuse   = lost.math.Vec4(0.8, 0.8, 0.8, 1.0)
  self.config.lightSpecular  = lost.math.Vec4(0.5, 0.5, 0.5, 1.0)
end
