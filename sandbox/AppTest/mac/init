
require("foo")
require("baz")

config = {}

function preinit(event)
  log.debug("preinit, building config")
  config.myparam = "value"
end

function init(event)
  log.debug("got event: "..event.type)
end

function key(event)
  log.debug("got event: "..event.type)
--  log.debug("key: "..event.key)
--  log.debug("pressed: "..event.pressed)
  app:quit()
  log.debug("gc mem: "..collectgarbage("count"))
end

app:addEventListener("applicationPreInit", preinit)
app:addEventListener("applicationInit", init)
app:addEventListener("keyDown", key)

controller = {}
controller.data = 13;
controller.keyDown = function(self, event)
  log.debug("in controller keyDown: "..self.data);
end

app:addEventListener("keyDown", controller, controller.keyDown)

ke = lost.application.KeyEvent("keyDown")
log.debug(tostring(ke.key).." : "..tostring(ke.pressed))
