
require("foo")
require("baz")

config = {}
config.displayAttributes = lost.common.DisplayAttributes()
config.displayAttributes.width = 320;
config.displayAttributes.height = 480;
config.displayAttributes.redbits = 8;
config.displayAttributes.bluebits = 8;
config.displayAttributes.greenbits = 8;
config.displayAttributes.alphabits = 8;
config.displayAttributes.depthbits = 24;
config.displayAttributes.stencilbits = 0;
config.displayAttributes.fullscreen = false;
config.displayAttributes.title = "AppTest";


function preinit(event)
  log.debug("preinit, building config")
  config.myparam = "value"
end

function init(event)
  log.debug("got event: "..event.type)
end

function key(event)
  log.debug("got event: "..event.type)
--  log.debug("key: "..event.key)
--  log.debug("pressed: "..event.pressed)
  app:quit()
  log.debug("gc mem: "..collectgarbage("count"))
end

app:addEventListener("applicationPreInit", preinit)
app:addEventListener("applicationInit", init)
app:addEventListener("keyDown", key)

controller = {}
controller.data = 13;
controller.keyDown = function(self, event)
  log.debug("in controller keyDown: "..self.data);
end

app:addEventListener("keyDown", controller, controller.keyDown)
